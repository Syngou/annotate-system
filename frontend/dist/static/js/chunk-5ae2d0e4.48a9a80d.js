(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ae2d0e4"],{"0473":function(t,e,a){},"354c":function(t,e,a){"use strict";a("c8e3")},7531:function(t,e,a){},8205:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("TopNavigation"),a("Essay"),a("div",{staticClass:"footer"},[t._v(" Copyright © Syngou ")])],1)},s=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"topNavigation"},[a("span",{staticClass:"title"},[t._v("医疗文本标注和处理系统")]),a("a",{on:{click:t.exportData}},[t._v("导出数据")]),a("a",{on:{click:t.saveTamporaryData}},[t._v("暂存数据")]),t.avatar?a("div",{staticClass:"right-menu"},[a("el-dropdown",{staticClass:"avatar-container",attrs:{trigger:"click"}},[a("div",{staticClass:"avatar-wrapper"},[a("img",{staticClass:"user-avatar",attrs:{src:t.avatar,alt:"用户头像"}})]),a("el-dropdown-menu",{staticClass:"user-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[a("router-link",{attrs:{to:"/"}},[a("el-dropdown-item",[t._v(" 主控台 ")])],1),a("router-link",{attrs:{to:"/annotateSetting"}},[a("el-dropdown-item",[t._v(" 标注设置 ")])],1),a("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(e){return t.logout(e)}}},[a("span",{staticStyle:{display:"block"}},[t._v("注销")])])],1)],1)],1):a("router-link",{staticStyle:{float:"right"},attrs:{to:"/login"}},[t._v(" 登录 ")]),a("AutoAnnotate")],1)},i=[],r=a("1da1"),l=a("5530"),c=(a("2b3d"),a("d3b7"),a("3ca3"),a("ddb0"),a("96cf"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{visible:t.annotateModal,title:"自动化标注","modal-append-to-body":!1,width:t.width},on:{"update:visible":function(e){t.annotateModal=e}}},[a("el-collapse",[a("el-collapse-item",{attrs:{title:"说明"}},[a("div",[t._v(" 一键标注全文，用于机器学习自动标注，后台传来要标注的词，前台进行标注，人工检查是否正确 ")]),a("hr"),a("div",[t._v(" 如果每种类型有多个值，请用"),a("span",{staticStyle:{color:"red","font-size":"20px"}},[t._v(" 一个 ")]),t._v(" 空格隔开"),a("br"),a("hr"),a("span",{staticStyle:{color:"red","font-size":"20px"}},[t._v(" 需在最开始时使用（即还未进行标注时），否则会有奇怪的结果 ")]),a("hr"),a("span",[t._v("因为只用于自动化标注，所以部署时此选项不可见")])])])],1),t._l(t.classification,(function(e,n){return a("div",{key:n},[a("el-input",{model:{value:t.inputValues[n],callback:function(e){t.$set(t.inputValues,n,e)},expression:"inputValues[index]"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[a("el-button",[t._v(" "+t._s(e.value)+" ")])],1)])],1)})),a("span",{staticStyle:{display:"flex","justify-content":"center","align-items":"center"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"}},[t._v("确定")])],1)],2)],1)}),d=[],u=a("2f62"),f={name:"AutoAnnotate",data:function(){return{annotateModal:!1,inputValues:[],width:""}},computed:Object(l["a"])({},Object(u["b"])(["classification"])),created:function(){var t=this;this.$bus.$on("autoAnnotate",(function(){t.annotateModal=!0}))},mounted:function(){var t=window.innerWidth;this.width=t<=450?"80%":"30%"}},p=f,v=a("2877"),h=Object(v["a"])(p,c,d,!1,null,null,null),g=h.exports,m={name:"TopNavigation",components:{AutoAnnotate:g},computed:Object(l["a"])({},Object(u["b"])(["avatar","annotateData","classification"])),methods:{logout:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("user/logout");case 2:case"end":return e.stop()}}),e)})))()},exportData:function(){var t=window.URL.createObjectURL(new Blob([JSON.stringify({id:this.$store.state.annotate.essayId,text:this.$store.state.annotate.annotateText,annotations:this.annotateData})])),e=document.createElement("a");e.href=t,e.setAttribute("download","file".concat(this.$store.state.annotate.essayId,".jsonl")),document.body.appendChild(e),e.click()},saveTamporaryData:function(){this.$message.info("待开发")}}},w=m,b=(a("a894"),Object(v["a"])(w,o,i,!1,null,"79913846",null)),y=b.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"paper"}},[a("link",{attrs:{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css",integrity:"sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u",crossorigin:"anonymous"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showDialog,expression:"showDialog"}],ref:"showDialog",staticClass:"optionDialog"},[t._l(t.classification,(function(e,n){return a("button",{key:n,style:{backgroundColor:e.color},on:{click:function(e){return t.annotateText(n+"-"+t.$store.state.annotate.id,n)}}},[t._v(" "+t._s(e.value)+"("+t._s(e.shortcut)+") ")])})),a("button",{on:{click:t.translateText}},[t._v(" 翻译 ")])],2),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showTranslateCard,expression:"showTranslateCard"}],ref:"translateCard",staticClass:"translate-card"},[a("i",{staticClass:"el-message__closeBtn el-icon-close delete-button",on:{click:function(e){t.showTranslateCard=!1}}}),a("TranslateCard",{attrs:{data:t.translateResult}})],1),a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"panel panel-default"},[t._m(0),a("div",{staticClass:"panel-body"},[a("div",{staticClass:"side"},[t._l(t.classification,(function(e,n){return a("button",{key:n,style:{backgroundColor:e.color},on:{click:function(e){return t.annotateText(n+"-"+t.$store.state.annotate.id,n)}}},[t._v(" "+t._s(e.value)+"("+t._s(e.shortcut)+") ")])})),a("br"),a("br"),a("router-link",{attrs:{to:"/AnnotateSetting"}},[t._v(" 添加新分类 ")])],2)])])]),a("div",{staticClass:"col-md-10"},[a("div",{staticClass:"panel panel-default"},[t._m(1),a("div",{staticClass:"panel-body"},[a("pre",{staticClass:"essay-content",style:"font-size:"+t.$store.state.annotate.fontSize+"px",attrs:{id:"essay"},domProps:{textContent:t._s(t.$store.state.annotate.annotateText)},on:{mouseup:function(e){return t.getSelection(e)}}})])])])])])])},C=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"panel-heading"},[a("div",{staticClass:"head"},[t._v(" 现有标签 ")]),a("hr"),a("div",{staticClass:"tip"},[t._v(" (选中文本后单击任一标签即可标注) ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"panel-heading"},[a("div",{staticClass:"head"},[t._v(" 文章如下 ")])])}],x=(a("25f0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card"},[t._v(" "+t._s(t.data.result)+" ")])}),k=[],S={name:"TranslateCard",props:{data:{type:Object,default:function(){return{}}}}},$=S,T=(a("354c"),Object(v["a"])($,x,k,!1,null,"4ca5c4ef",null)),D=T.exports,O=a("2909"),j=(a("99af"),a("1276"),a("ac1f"),a("498a"),a("4360"));function A(){return"cursor:pointer;margin-left:5px"}function E(t){return"border:5px solid ".concat(j["a"].state.annotate.classification[t].color,";background-color:").concat(j["a"].state.annotate.classification[t].color,";border-radius: 10px;")}function R(t,e){var a=window.getSelection().toString(),n=E(e);if(a.length>0){var s=document.querySelector("#essay"),o=window.getSelection().getRangeAt(0),i=o.cloneRange();i.selectNodeContents(s),i.setEnd(o.startContainer,o.startOffset);var r=Object(O["a"])(i.toString()).length,l=r+Object(O["a"])(o.toString()).length,c={id:t.split("-")[1],label:t.split("-")[0],start_offset:r,end_offset:l,text:a,user:1,updated_at:new Date};j["a"].dispatch("annotate/addToList",{id:t,annotateData:c});var d=document.createElement("i");d.setAttribute("id",t),d.addEventListener("click",(function(){B(t)})),d.setAttribute("class","el-icon-close"),d.setAttribute("style",A());var u=document.createElement("span");u.setAttribute("style",n);var f=window.getSelection().getRangeAt(0);f.surroundContents(u),u.appendChild(d),window.getSelection().removeAllRanges(),j["a"].state.annotate.id++}}function B(t){var e=document.getElementById("essay"),a=document.getElementById(t).parentNode,n=document.createTextNode(a.innerText.trim()),s=a.innerText.trim();e.insertBefore(n,a),e.removeChild(a),j["a"].dispatch("annotate/deleteDataFromList",{type:t,text:s})}var N=a("b775");function P(t){return Object(N["a"])({url:"user/translate/?text=".concat(t),method:"get"})}var V={name:"Essays",components:{TranslateCard:D},data:function(){return{showDialog:!1,selectText:"",showTranslateCard:!1,translateResult:{}}},computed:Object(l["a"])({},Object(u["b"])(["classification"])),created:function(){this.annotateByShortcut()},methods:{setBoxPosition:function(t,e){this.$refs.showDialog.style.left=t-100+"px",this.$refs.showDialog.style.top=e+20+"px",this.$refs.translateCard.style.left=t+10+"px",this.$refs.translateCard.style.top=e+10+"px"},getSelection:function(t){""!==window.getSelection().toString()?(this.selectText=window.getSelection().toString(),this.setBoxPosition(t.pageX,t.pageY),this.$refs.showDialog.style.display="block",this.showDialog=!0):this.showDialog=!1},annotateText:function(t,e){this.showDialog=!1,R(t,e)},annotateByShortcut:function(){var t=this;document.onkeydown=function(e){var a=e.key,n=t.$store.state.annotate.id;t.showDialog=!1;for(var s=0;s<t.$store.state.annotate.classification.length;s++)if(a===t.$store.state.annotate.classification[s].shortcut){R(s+"-"+n,s);break}}},translateText:function(){var t=this;this.showDialog=!1;var e=window.getSelection().toString();P(e).then((function(e){t.translateResult=e.data,t.showTranslateCard=!0}))}}},z=V,I=(a("a7cb"),Object(v["a"])(z,_,C,!1,null,"75704be4",null)),L=I.exports,J={name:"Annotate",components:{TopNavigation:y,Essay:L},mounted:function(){this.isPC()},methods:{isPC:function(){for(var t=["Android","iPhone","Windows Phone","iPad","iPod"],e=navigator.userAgent,a=0;a<t.length;a++)if(e.indexOf(t[a])>0){this.$message.warning({message:"手机是无法进行标注的哦,请使用电脑浏览器。",duration:5e3,showClose:!0});break}}}},M=J,U=(a("fcd9"),Object(v["a"])(M,n,s,!1,null,"3c4b9264",null));e["default"]=U.exports},a7cb:function(t,e,a){"use strict";a("0473")},a894:function(t,e,a){"use strict";a("b6fb")},b6fb:function(t,e,a){},c8e3:function(t,e,a){},fcd9:function(t,e,a){"use strict";a("7531")}}]);